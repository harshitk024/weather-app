(()=>{"use strict";class t{static async getData(t,e,n){let o;o=null==t?await fetch(`https://weather.visualcrossing.com/VisualCrossingWebServices/rest/services/timeline/${n},${e}?unitGroup=metric&key=DBGPCC34U7KPLBQNLVVWS4YBZ`):await fetch(`https://weather.visualcrossing.com/VisualCrossingWebServices/rest/services/timeline/${t}?unitGroup=metric&key=DBGPCC34U7KPLBQNLVVWS4YBZ`);const r=await o.json();return console.log(r),r}static getCurrentLocation(){return new Promise(((t,e)=>{navigator.geolocation?navigator.geolocation.getCurrentPosition((e=>{const n=e.coords.longitude,o=e.coords.latitude;t({longitude:n,latitude:o})}),(t=>{e(-1)})):e(-1)}))}static async getCurrentLocationData(){try{const e=await t.getCurrentLocation(),n=await t.getCity(e.longitude,e.latitude);return await t.getData(n.address.city)}catch(t){alert("Error Occured")}}static getCity(t,e){return fetch(`https://nominatim.openstreetmap.org/reverse?format=json&lat=${e}&lon=${t}`).then((function(t){if(!t.ok)throw new Error("Network response was not ok");return t.json()})).then((function(t){if(t&&t.address)return t})).catch((function(t){console.error("Error fetching data:",t)}))}}class e{static async loadHomePage(){t.getCurrentLocationData().then((t=>e.updateWeatherCard(t))),e.handleEventListeners()}static handleEventListeners(){document.querySelector("#loc-submit").addEventListener("click",(()=>{const n=document.querySelector("#loc-input").value;t.getData(n).then((t=>e.updateWeatherCard(t)))}))}static updateWeatherCard(t){if(null!=t){const n=t.currentConditions,o=new Date;document.querySelector("#temp").textContent=n.temp,document.querySelector("#cond").textContent=n.conditions,document.querySelector("#wind-speed").textContent=n.windspeed,document.querySelector("#hum-per").textContent=n.humidity,document.querySelector(".card-title").textContent=t.address,document.querySelector("#date-today").textContent=o.getDate()+" "+e.getMonthName(o.getMonth()),e.updateWeatherInfoCard(t),e.generateWeatherForeCast(t)}}static updateWeatherInfoCard(t){const e=t.days[0];document.querySelector("#high").textContent=`${e.tempmax}°`,document.querySelector("#low").textContent=`${e.tempmin}°`,document.querySelector("#sunrise").textContent=e.sunrise.substring(0,e.sunrise.length-3),document.querySelector("#sunset").textContent=e.sunset.substring(0,e.sunset.length-3),document.querySelector("#feels").textContent=`${e.feelslike}°`,document.querySelector("#uv").textContent=e.uvindex,document.querySelector("#rain").textContent=`${e.precipprob}%`,document.querySelector("#visibility").textContent=e.visibility,document.querySelector(".weather-description").textContent=t.description}static getMonthName(t){return["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"][t-1]}static generateWeatherForeCast(t){const e=document.querySelector(".weather-forecast");t.days.forEach((t=>{const n=document.createElement("div");n.classList.add("day-card"),document.createElement("div"),e.append(n)}))}static getLocData(){}}document.addEventListener("DOMContentLoaded",e.loadHomePage())})();